{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <title>Simple Map</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <link href="{% static 'css/sakata.css' %}" rel="stylesheet" />
    <link href="{% static 'css/style.css' %}" rel="stylesheet" />
    <link href="{% static 'css/test3.css' %}" rel="stylesheet" />
    <script src="{% static 'js/index3.js' %}"></script>
    <script src="{% static 'js/apikey.js' %}"></script>
    <!-- <script src="{% static 'js/hozonyou.js' %}"></script> -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  </head>
  <body>
    <header>
      <h1>
          <a href="../">観光推進MAP</a>
      </h1>
      <nav class="pc-nav">
          <ul>
              <!-- <li><a id="mise">飲食店</a></li> -->
              <li><a href="#">システム概要</a></li>
              <li><a href="map">マップ</a></li>
              <li><a href="#">ログイン</a></li>
              <li><a href="#">お問い合わせ</a></li>
          </ul>
      </nav>
      <section>
          <div class="btn-trigger" id="btn03">
            <span></span>
            <span></span>
            <span></span>
          </div>
      </section>
  </header>
    
    <input
      id="pac-input"
      class="controls"
      type="text"
      placeholder="Google マップを検索する"
    />
    <div id="category">
      <ul>
        <li class="kara"><a href="http://localhost:3000/">音声検索</a></li>
        <li><a id="mise">飲食店</a></li>
        <li><a id="cate1" data-value="atm">ATM</a></li>
        <li><a id="cate2" data-value="スーパー">スーパー</a></li>
        <li><a id="cate3" data-value="ホテル">ホテル</a></li>
        <li><a id="cate4" data-value="病院">病院</a></li>
        <li><a id="navi-end" style="display: none; margin-right: 8em;">ナビ終了</a></li>
        <a href="http://webservice.recruit.co.jp/" class="gu" ><img src="http://webservice.recruit.co.jp/banner/hotpepper-s.gif" alt="ホットペッパー Webサービス" width="135" height="17" border="0" title="ホットペッパー Webサービス"></a>
      </ul>
    </div>
    <!-- <p><button onclick="getMyPlace()">現在位置を取得</button></p> -->
      <!-- <button id="button">ボタン</button> -->
    <!-- <input type="text" onKeyUp="callback()" /> -->
<div id="result"></div>
<!-- <div id="map" style="width:100%;height:300px;"></div> -->
    <div id="map"></div>
    <div id="map-canvas"></div>
    <!-- <div id="directionsPanel"></div> -->


    
<button onclick="time()">start</button>
<button onclick="clearTime()">stop</button>
<button onclick="c()">clear</button>


<div class="searchbox" style="display: none;" id="searchbox">
    
    <p><span class="bold">住所･地名から検索</span></p>
    <p>start:<input type="text" name="sp" id="sp"></p>
    End:<input type="text" name="ep" id="ep">
    <input type="submit" name="regist" value="検索" id="searchButton" onclick="se()">
    
</div>
<script>
    function se(){
      directionsDisplay.setMap(null);
      directionsDisplay.setPanel(null);
      directionsDisplay.setDirections(null);
      var s,e;
      s = $('#sp').val();
      e = $('#ep').val();
      console.log(s);
      console.log(e);
      // ini(s,e);
      // cal(s,e);   
      initialize(s,e);
      calcRoute(s,e);
    }


    var map, begin, end;
var directionsDisplay;
var directionsService;

begin = '東京駅';
end = '東京スカイツリー';

$(function() {
    $('#searchButton').click(function(e) {
        e.preventDefault();         // hrefが無効になり、画面遷移が行わない

        begin = $('#inputBegin').val();
        end   = $('#inputEnd').val();

        // ルート説明をクリア
        $('#directionsPanel').text(' ');

        google.maps.event.addDomListener(window, 'load', initialize(begin, end));
        google.maps.event.addDomListener(window, 'load', calcRoute(begin, end));
    });
});


// function ini(begin, end) {
//     // インスタンス[geocoder]作成
//     var geocoder = new google.maps.Geocoder();

//     geocoder.geocode({
//         // 起点のキーワード
//         'address': begin

//     }, function(result, status) {
//         if (status == google.maps.GeocoderStatus.OK) {
//             // 中心点を指定
//             var latlng = result[0].geometry.location;

//             // オプション
//             var myOptions = {
//                 zoom: 14,
//                 center: latlng,
//                 scrollwheel: false,     // ホイールでの拡大・縮小
//                 mapTypeId: google.maps.MapTypeId.ROADMAP,
//             };

//             // #map_canvasを取得し、[mapOptions]の内容の、地図のインスタンス([map])を作成する
//             map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);

//             // 経路を取得
//             directionsDisplay = new google.maps.DirectionsRenderer();
//             directionsDisplay.setMap(map);
//             directionsDisplay.setPanel(document.getElementById('directionsPanel'));     // 経路詳細

//             // 場所
//             $('#begin').text(begin);
//             $('#end').text(end);

//         } else {
//             alert('取得できませんでした…');
//         }
//     });
// }

// // ルート取得
// function cal(begin, end) {

//     var request = {
//         origin: begin,         // 開始地点
//         destination: end,      // 終了地点
//         travelMode: google.maps.TravelMode.DRIVING,     // [自動車]でのルート
//         avoidHighways: true,        // 高速道路利用フラグ
//     };

//     // インスタンス作成
//     directionsService = new google.maps.DirectionsService();

//     directionsService.route(request, function(response, status) {
//         if (status == google.maps.DirectionsStatus.OK) {
//             directionsDisplay.setDirections(response);
//         } else {
//             alert('ルートが見つかりませんでした…');
//         }
//     });
// }

$(function(){
    // モーダル開く
    $(".js-overlay-modal-open").on("click", function(){
        $(".overlay-modal").fadeIn('normal');
        $("body").addClass('modal-open');
    });

    // モーダル閉じる
    $(".js-overlay-modal-close").on("click", function(){
        $(".overlay-modal").fadeOut('normal');
        $("body").removeClass('modal-open');
    });
});


</script>
<p>
  <label for="mode">モード：<select id="mode" name="mode">
    <option value="driving" selected>自動車</option>
    <option value="bicycling">自転車</option>
    <option value="transit">電車(日本国外)</option>
    <option value="walking">徒歩</option>
  </select></label>
</p>

<p>
  <label for="highways">高速道路：<select id="highways" name="highways">
    <option value="yes" selected>使用する</option>
    <option value="no">使用しない</option>
  </select></label>
</p>

<div class="overlay__conts">
    <p class="btn-overlay btn-pink">
        <a href="javascript:void(0);" class="js-overlay-modal-open">飲食店詳細検索</a>
    </p>
    <div class="overlay-modal js-overlay-modal">
      <div class="overlay-modal__overlay"></div>
        <div class="overlay-modal__body">
            <div class="overlay-modal__inner">
                <a href="javascript:void(0);" class="overlay-modal__close js-overlay-modal-close"><i class="fas fa-times"></i></a>
                <p>
                    <label for="range">検索範囲：<select id="range" name="range">
                        <option value="1">300m</option>
                        <option value="2">500m</option>
                        <option value="3" selected>1000m</option>
                        <option value="4">2000m</option>
                        <option value="5">3000m</option>
                    </select></label>
                    <br>
                    <label for="genre">ジャンル：<select id="genre" name="genre">
                        <option value="" selected>指定しない</option>
                        <option value="G001">居酒屋</option>
                        <option value="G002">ダイニングバー・バル</option>
                        <option value="G003">創作料理</option>
                        <option value="G004">和食</option>
                        <option value="G005">洋食</option>
                        <option value="G006">イタリアン・フレンチ</option>
                        <option value="G007">中華</option>
                        <option value="G008">焼肉・ホルモン</option>
                        <option value="G017">韓国料理</option>
                        <option value="G009">アジア・エスニック料理</option>
                        <option value="G010">各国料理</option>
                        <option value="G011">カラオケ・パーティ</option>
                        <option value="G012">バー・カクテル</option>
                        <option value="G013">ラーメン</option>
                        <option value="G016">お好み焼き・もんじゃ</option>
                        <option value="G014">カフェ・スイーツ</option>
                        <option value="G015">その他グルメ</option>
                    </select></label>
                    <br>
                    <!-- <label for="private_room">個室：<select id="private_room" name="private_room">
                        <option value="" selected>指定しない</option>
                        <option value="">あり</option>
                    </select></label>
                    <br>
                    <label for="card">カード支払い：<select id="card" name="card">
                        <option value="" selected>指定しない</option>
                        <option value="">可</option>
                    </select></label>
                    <br>
                    <label for="lunch">ランチ：<select id="lunch" name="lunch">
                        <option value="" selected>指定しない</option>
                        <option value="">あり</option>
                    </select></label>
                    <br>
                    <label for="wifi">WiFi：<select id="wifi" name="wifi">
                        <option value="" selected>指定しない</option>
                        <option value="">あり</option>
                    </select></label> -->
                    <input type="button" class="js-overlay-modal-close" onclick="syousai()" value="検索">
                    <form name="ca">
                      <label><input type="checkbox" id="card" name="syousai">
                        カード支払い</label>
                      
                      <label for="lunch"><input type="checkbox" id="lunch" name="syousai">
                        ランチ</label>
                      
                      <label for="wifi"><input type="checkbox" id="wifi" name="syousai">
                        WiFi</label>
                      
                      <label for="private_room"><input type="checkbox" id="private_room" name="syousai">
                        個室</label>
                      
                      <label for="midnight_meal"><input type="checkbox" id="midnight_meal" name="syousai">
                        23時以降食事OK</label>
                      
                      <label for="pet"><input type="checkbox" id="pet" name="syousai">
                        ペット可</label>
                      
                      <label for="cocktail"><input type="checkbox" id="cocktail" name="syousai">
                        カクテル充実</label>
                      
                      <label for="shochu"><input type="checkbox" id="shochu" name="syousai">
                        焼酎充実</label>
                      
                      <label for="sake"><input type="checkbox" id="sake" name="syousai">
                        日本酒充実</label>
                      
                      <label for="wine"><input type="checkbox" id="wine" name="syousai">
                        ワイン充実</label>
                      
                      <label for="parking"><input type="checkbox" id="parking" name="syousai">
                        駐車場あり</label>
                      
                      <label for="barrier_free"><input type="checkbox" id="barrier_free" name="syousai">
                        バリアフリー</label>
                      
                      <label for="free_food"><input type="checkbox" id="free_food" name="syousai">
                        食べ放題</label>
                      
                      <label for="free_drink"><input type="checkbox" id="free_drink" name="syousai">
                        飲み放題</label>
                      
                      <label for="child"><input type="checkbox" id="child" name="syousai">
                        お子様連れOK</label>
                      
                      <label for="non_smoking"><input type="checkbox" id="non_smoking" name="syousai">
                        禁煙席</label>
                      
                      <label for="tatami"><input type="checkbox" id="tatami" name="syousai">
                        座敷あり</label>
                      
                      <label for="course"><input type="checkbox" id="course" name="syousai">
                        コースあり</label>
                      
                      <label for="keyword"><input type="text" id="keyword" name="keyword">
                        キーワード</label>
                  </form>
                </p>
            </div>
        </div>
    </div>
</div>

<div id="directionsPanel"></div>
<pre id="position_view"></pre>

    <script>
      gmap();
    </script>



    <!-- <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script> -->
    <!-- <a href="http://webservice.recruit.co.jp/"><img src="http://webservice.recruit.co.jp/banner/hotpepper-m.gif" alt="ホットペッパー Webサービス" width="88" height="35" border="0" title="ホットペッパー Webサービス"></a> -->
    <!-- <a href="http://webservice.recruit.co.jp/"><img src="http://webservice.recruit.co.jp/banner/hotpepper-s.gif" alt="ホットペッパー Webサービス" width="135" height="17" border="0" title="ホットペッパー Webサービス"></a> -->
  </body>
</html>