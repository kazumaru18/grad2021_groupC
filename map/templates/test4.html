{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <title>Simple Map</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <link href="{% static 'css/sakata.css' %}" rel="stylesheet" />
    <link href="{% static 'css/style.css' %}" rel="stylesheet" />
    <script src="{% static 'js/index.js' %}"></script>
    <script src="{% static 'js/apikey.js' %}"></script>
    <!-- <script src="{% static 'js/hozonyou.js' %}"></script> -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  </head>
  <body>
    <header>
      <h1>
          <a href="../">観光推進MAP</a>
      </h1>
      <nav class="pc-nav">
          <ul>
              <!-- <li><a id="mise">飲食店</a></li> -->
              <li><a href="#">システム概要</a></li>
              <li><a href="map">マップ</a></li>
              <li><a href="#">ログイン</a></li>
              <li><a href="#">お問い合わせ</a></li>
          </ul>
      </nav>
      <section>
          <div class="btn-trigger" id="btn03">
            <span></span>
            <span></span>
            <span></span>
          </div>
      </section>
  </header>
    
    <input
      id="pac-input"
      class="controls"
      type="text"
      placeholder="Google マップを検索する"
    />
    <div id="category">
      <ul>
        <li class="kara"><a href="http://localhost:3000/">音声検索</a></li>
        <li><a id="mise">飲食店</a></li>
        <li><a id="cate1" data-value="atm">ATM</a></li>
        <li><a id="cate2" data-value="スーパー">スーパー</a></li>
        <li><a id="cate3" data-value="ホテル">ホテル</a></li>
        <li><a id="cate4" data-value="病院">病院</a></li>
        <li><a id="navi-end" style="display: none; margin-right: 8em;">ナビ終了</a></li>
        <a href="http://webservice.recruit.co.jp/" class="gu" ><img src="http://webservice.recruit.co.jp/banner/hotpepper-s.gif" alt="ホットペッパー Webサービス" width="135" height="17" border="0" title="ホットペッパー Webサービス"></a>
      </ul>
    </div>
    <!-- <p><button onclick="getMyPlace()">現在位置を取得</button></p> -->
      <!-- <button id="button">ボタン</button> -->
    <!-- <input type="text" onKeyUp="callback()" /> -->
<div id="result"></div>
<!-- <div id="map" style="width:100%;height:300px;"></div> -->
    <div id="map"></div>
    <div id="map-canvas"></div>
    <!-- <div id="directionsPanel"></div> -->


    
<button onclick="time()">start</button>
<button onclick="clearTime()">stop</button>
<button onclick="c()">clear</button>


<div class="searchbox" style="display: none;" id="searchbox">
    
    <p><span class="bold">住所･地名から検索</span></p>
    <p>start:<input type="text" name="sp" id="sp"></p>
    End:<input type="text" name="ep" id="ep">
    <input type="submit" name="regist" value="検索" id="searchButton" onclick="se()">
    
</div>
<script>
    function se(){
      directionsDisplay.setMap(null);
      directionsDisplay.setPanel(null);
      directionsDisplay.setDirections(null);
      var s,e;
      s = $('#sp').val();
      e = $('#ep').val();
      console.log(s);
      console.log(e);
      // ini(s,e);
      // cal(s,e);   
      initialize(s,e);
      calcRoute(s,e);
    }


    var map, begin, end;
var directionsDisplay;
var directionsService;

begin = '東京駅';
end = '東京スカイツリー';

$(function() {
    $('#searchButton').click(function(e) {
        e.preventDefault();         // hrefが無効になり、画面遷移が行わない

        begin = $('#inputBegin').val();
        end   = $('#inputEnd').val();

        // ルート説明をクリア
        $('#directionsPanel').text(' ');

        google.maps.event.addDomListener(window, 'load', initialize(begin, end));
        google.maps.event.addDomListener(window, 'load', calcRoute(begin, end));
    });
});


// function ini(begin, end) {
//     // インスタンス[geocoder]作成
//     var geocoder = new google.maps.Geocoder();

//     geocoder.geocode({
//         // 起点のキーワード
//         'address': begin

//     }, function(result, status) {
//         if (status == google.maps.GeocoderStatus.OK) {
//             // 中心点を指定
//             var latlng = result[0].geometry.location;

//             // オプション
//             var myOptions = {
//                 zoom: 14,
//                 center: latlng,
//                 scrollwheel: false,     // ホイールでの拡大・縮小
//                 mapTypeId: google.maps.MapTypeId.ROADMAP,
//             };

//             // #map_canvasを取得し、[mapOptions]の内容の、地図のインスタンス([map])を作成する
//             map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);

//             // 経路を取得
//             directionsDisplay = new google.maps.DirectionsRenderer();
//             directionsDisplay.setMap(map);
//             directionsDisplay.setPanel(document.getElementById('directionsPanel'));     // 経路詳細

//             // 場所
//             $('#begin').text(begin);
//             $('#end').text(end);

//         } else {
//             alert('取得できませんでした…');
//         }
//     });
// }

// // ルート取得
// function cal(begin, end) {

//     var request = {
//         origin: begin,         // 開始地点
//         destination: end,      // 終了地点
//         travelMode: google.maps.TravelMode.DRIVING,     // [自動車]でのルート
//         avoidHighways: true,        // 高速道路利用フラグ
//     };

//     // インスタンス作成
//     directionsService = new google.maps.DirectionsService();

//     directionsService.route(request, function(response, status) {
//         if (status == google.maps.DirectionsStatus.OK) {
//             directionsDisplay.setDirections(response);
//         } else {
//             alert('ルートが見つかりませんでした…');
//         }
//     });
// }

</script>
<p>
  <label for="mode">モード：<select id="mode" name="mode">
    <option value="driving" selected>DRIVING（自動車）</option>
    <option value="bicycling">BICYCLING （自転車）</option>
    <option value="transit">TRANSIT（電車）</option>
    <option value="walking">WALKING（徒歩）</option>
  </select></label>
</p>

<p>
  <label for="highways">高速道路：<select id="highways" name="highways">
    <option value="yes" selected>使用する</option>
    <option value="no">使用しない</option>
  </select></label>
</p>


<div id="directionsPanel"></div>
<pre id="position_view"></pre>

    <script>
      gmap();
    </script>



    <!-- <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script> -->
    <!-- <a href="http://webservice.recruit.co.jp/"><img src="http://webservice.recruit.co.jp/banner/hotpepper-m.gif" alt="ホットペッパー Webサービス" width="88" height="35" border="0" title="ホットペッパー Webサービス"></a> -->
    <!-- <a href="http://webservice.recruit.co.jp/"><img src="http://webservice.recruit.co.jp/banner/hotpepper-s.gif" alt="ホットペッパー Webサービス" width="135" height="17" border="0" title="ホットペッパー Webサービス"></a> -->
  </body>
</html>